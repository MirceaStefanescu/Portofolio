<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="960" height="540" viewBox="0 0 960 540">
  <defs>
    <linearGradient id="bg2" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#f1f7f2" />
      <stop offset="100%" stop-color="#f7f1f1" />
    </linearGradient>
    <style>
      .box { fill: #ffffff; stroke: #2f3b4c; stroke-width: 2; rx: 10; }
      .title { font: 700 20px Helvetica, Arial, sans-serif; fill: #2f3b4c; }
      .label { font: 600 14px Helvetica, Arial, sans-serif; fill: #2f3b4c; }
      .muted { font: 400 12px Helvetica, Arial, sans-serif; fill: #5a6b7d; }
      .arrow { stroke: #2f3b4c; stroke-width: 2; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2f3b4c" />
    </marker>
  </defs>

  <rect width="960" height="540" fill="url(#bg2)" />

  <text x="40" y="50" class="title">Query Flow</text>
  <text x="40" y="78" class="muted">JWT validation, retrieval, and response assembly</text>

  <rect x="60" y="140" width="200" height="90" class="box" />
  <text x="80" y="180" class="label">Client Question</text>
  <text x="80" y="202" class="muted">Bearer token</text>

  <rect x="320" y="140" width="200" height="90" class="box" />
  <text x="340" y="180" class="label">JWT + RBAC</text>
  <text x="340" y="202" class="muted">AuthZ enforced</text>

  <rect x="580" y="120" width="260" height="130" class="box" />
  <text x="600" y="160" class="label">Retriever</text>
  <text x="600" y="182" class="muted">Embed question</text>
  <text x="600" y="202" class="muted">Search Qdrant</text>
  <text x="600" y="222" class="muted">Rank passages</text>

  <rect x="320" y="320" width="260" height="110" class="box" />
  <text x="340" y="360" class="label">Answer Composer</text>
  <text x="340" y="382" class="muted">Contextual summary</text>

  <rect x="60" y="340" width="200" height="80" class="box" />
  <text x="80" y="380" class="label">Response</text>
  <text x="80" y="402" class="muted">Answer + context</text>

  <line x1="260" y1="185" x2="320" y2="185" class="arrow" />
  <line x1="520" y1="185" x2="580" y2="185" class="arrow" />
  <line x1="710" y1="250" x2="470" y2="320" class="arrow" />
  <line x1="320" y1="375" x2="260" y2="375" class="arrow" />
</svg>
